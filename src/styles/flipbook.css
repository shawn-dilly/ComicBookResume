/* Flipbook CSS - Minimal overrides for page-flip library */
/* IMPORTANT: Don't override position, display, or dimensions - let the library handle those */

/* Allow 3D page flip animation to render properly */
/* We use mask overlays in ComicBook.module.css to hide overflow outside the book */
.stf__parent {
  /* Allow overflow so page curl animation is visible */
  overflow: visible !important;
  /* Preserve 3D transforms for realistic page curl effect */
  transform-style: preserve-3d !important;
  /* Isolate the stacking context */
  isolation: isolate !important;
}

.stf__wrapper {
  overflow: visible !important;
  transform-style: preserve-3d !important;
}

.stf__block {
  overflow: visible !important;
  transform-style: preserve-3d !important;
}

/*
 * CRITICAL FIX: Ensure left page content is always visible during animations
 * The library manages z-index dynamically, but we need to ensure visibility
 */

/* All page items should have visible backfaces for 3D transforms */
.stf__item {
  backface-visibility: visible !important;
  -webkit-backface-visibility: visible !important;
}

/* Ensure left-side pages are visible during the flip animation */
.stf__item.--left {
  opacity: 1 !important;
  visibility: visible !important;
}

/* When the parent is in flipping state, all items must be visible */
.stf__parent.--flipping .stf__item {
  opacity: 1 !important;
  visibility: visible !important;
}

/* Active pages (being displayed or animated) should always be visible */
.stf__item.--active {
  opacity: 1 !important;
  visibility: visible !important;
}

/* Pages with inline z-index (set during animation) should be visible */
.stf__item[style*="z-index"] {
  opacity: 1 !important;
  visibility: visible !important;
}

/*
 * Only hide the "ghost" left page when:
 * - Book is NOT flipping
 * - Page is NOT active
 * - Page has no inline z-index (not part of animation)
 * This targets the empty left placeholder when book is on page 0 (cover)
 */
.stf__parent:not(.--flipping) .stf__item.--left:not(.--active):not([style*="z-index"]):first-child {
  opacity: 0;
}
